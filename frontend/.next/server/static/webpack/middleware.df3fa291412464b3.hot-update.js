"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./auth.js":
/*!*****************!*\
  !*** ./auth.js ***!
  \*****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   handlers: () => (/* binding */ handlers),\n/* harmony export */   providerMap: () => (/* binding */ providerMap),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(middleware)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(middleware)/./node_modules/next-auth/providers/credentials.js\");\n\n\n// import type { Provider } from 'next-auth/providers';\n// import type { AuthProvider } from '@toolpad/core';\n\nconst providers = [\n    (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n        credentials: {\n            email: {\n                label: \"Email Address\",\n                type: \"email\"\n            },\n            password: {\n                label: \"Password\",\n                type: \"password\"\n            }\n        },\n        authorize: async (c)=>{\n            return {\n                id: 1,\n                name: \"Test User\",\n                email: \"test@email.com\"\n            };\n        }\n    })\n];\nconst providerMap = providers.map((provider)=>{\n    if (typeof provider === \"function\") {\n        const providerData = provider();\n        return {\n            id: providerData.id,\n            name: providerData.name\n        };\n    }\n    return {\n        id: provider.id,\n        name: provider.name\n    };\n});\nconst { handlers, auth, signIn, signOut } = (0,next_auth__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    providers,\n    secret: process.env.AUTH_SECRET,\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.roles = user.roles;\n            }\n            return token;\n        },\n        async session ({ session, token, user }) {\n            session.user.roles = token.roles;\n            return session;\n        },\n        authorized ({ auth: session, request: { nextUrl } }) {\n            const isLoggedIn = !!session?.user;\n            const isPublicPage = nextUrl.pathname.startsWith(\"/public\");\n            if (isPublicPage || isLoggedIn) {\n                return true;\n            }\n            return false; // Redirect unauthenticated users to login page\n        }\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vYXV0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ3lCO0FBQzFELHVEQUF1RDtBQUN2RCxxREFBcUQ7QUFDM0I7QUFFMUIsTUFBTUcsWUFBWTtJQUNoQkYsMkVBQVdBLENBQUM7UUFDVkcsYUFBYTtZQUNYQyxPQUFPO2dCQUFFQyxPQUFPO2dCQUFpQkMsTUFBTTtZQUFRO1lBQy9DQyxVQUFVO2dCQUFFRixPQUFPO2dCQUFZQyxNQUFNO1lBQVc7UUFDbEQ7UUFDQUUsV0FBVyxPQUFPQztZQUNoQixPQUFPO2dCQUNMQyxJQUFJO2dCQUNKQyxNQUFNO2dCQUNOUCxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0NBQ0Q7QUFFTSxNQUFNUSxjQUFjVixVQUFVVyxHQUFHLENBQUMsQ0FBQ0M7SUFDeEMsSUFBSSxPQUFPQSxhQUFhLFlBQVk7UUFDbEMsTUFBTUMsZUFBZUQ7UUFDckIsT0FBTztZQUFFSixJQUFJSyxhQUFhTCxFQUFFO1lBQUVDLE1BQU1JLGFBQWFKLElBQUk7UUFBQztJQUN4RDtJQUNBLE9BQU87UUFBRUQsSUFBSUksU0FBU0osRUFBRTtRQUFFQyxNQUFNRyxTQUFTSCxJQUFJO0lBQUM7QUFDaEQsR0FBRztBQUVJLE1BQU0sRUFBRUssUUFBUSxFQUFFQyxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdwQixxREFBUUEsQ0FBQztJQUMxREc7SUFDQWtCLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztJQUMvQkMsT0FBTztRQUNMTixRQUFRO0lBQ1Y7SUFDQU8sV0FBVztRQUNULE1BQU1DLEtBQUksRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUU7WUFDdkIsSUFBSUEsTUFBTTtnQkFDUkQsTUFBTUUsS0FBSyxHQUFHRCxLQUFLQyxLQUFLO1lBQzFCO1lBQ0EsT0FBT0Y7UUFDVDtRQUNBLE1BQU1HLFNBQVEsRUFBRUEsT0FBTyxFQUFFSCxLQUFLLEVBQUVDLElBQUksRUFBRTtZQUNwQ0UsUUFBUUYsSUFBSSxDQUFDQyxLQUFLLEdBQUdGLE1BQU1FLEtBQUs7WUFDaEMsT0FBT0M7UUFDVDtRQUNBQyxZQUFXLEVBQUVkLE1BQU1hLE9BQU8sRUFBRUUsU0FBUyxFQUFFQyxPQUFPLEVBQUUsRUFBRTtZQUNoRCxNQUFNQyxhQUFhLENBQUMsQ0FBQ0osU0FBU0Y7WUFDOUIsTUFBTU8sZUFBZUYsUUFBUUcsUUFBUSxDQUFDQyxVQUFVLENBQUM7WUFFakQsSUFBSUYsZ0JBQWdCRCxZQUFZO2dCQUM5QixPQUFPO1lBQ1Q7WUFFQSxPQUFPLE9BQU8sK0NBQStDO1FBQy9EO0lBQ0Y7QUFDRixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2F1dGguanM/ZjU1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGggZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBDcmVkZW50aWFscyBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcbi8vIGltcG9ydCB0eXBlIHsgUHJvdmlkZXIgfSBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzJztcbi8vIGltcG9ydCB0eXBlIHsgQXV0aFByb3ZpZGVyIH0gZnJvbSAnQHRvb2xwYWQvY29yZSc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5jb25zdCBwcm92aWRlcnMgPSBbXG4gIENyZWRlbnRpYWxzKHtcbiAgICBjcmVkZW50aWFsczoge1xuICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCBBZGRyZXNzJywgdHlwZTogJ2VtYWlsJyB9LFxuICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfSxcbiAgICB9LFxuICAgIGF1dGhvcml6ZTogYXN5bmMgKGMpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiAxLCAgXG4gICAgICAgIG5hbWU6IFwiVGVzdCBVc2VyXCIsICBcbiAgICAgICAgZW1haWw6IFwidGVzdEBlbWFpbC5jb21cIixcbiAgICAgIH07XG4gICAgfVxuICB9KSxcbl07XG5cbmV4cG9ydCBjb25zdCBwcm92aWRlck1hcCA9IHByb3ZpZGVycy5tYXAoKHByb3ZpZGVyKSA9PiB7XG4gIGlmICh0eXBlb2YgcHJvdmlkZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBwcm92aWRlckRhdGEgPSBwcm92aWRlcigpO1xuICAgIHJldHVybiB7IGlkOiBwcm92aWRlckRhdGEuaWQsIG5hbWU6IHByb3ZpZGVyRGF0YS5uYW1lIH07XG4gIH1cbiAgcmV0dXJuIHsgaWQ6IHByb3ZpZGVyLmlkLCBuYW1lOiBwcm92aWRlci5uYW1lIH07XG59KTtcblxuZXhwb3J0IGNvbnN0IHsgaGFuZGxlcnMsIGF1dGgsIHNpZ25Jbiwgc2lnbk91dCB9ID0gTmV4dEF1dGgoe1xuICBwcm92aWRlcnMsXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQsXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4ucm9sZXMgPSB1c2VyLnJvbGVzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIHNlc3Npb24udXNlci5yb2xlcyA9IHRva2VuLnJvbGVzO1xuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgICBhdXRob3JpemVkKHsgYXV0aDogc2Vzc2lvbiwgcmVxdWVzdDogeyBuZXh0VXJsIH0gfSkge1xuICAgICAgY29uc3QgaXNMb2dnZWRJbiA9ICEhc2Vzc2lvbj8udXNlcjtcbiAgICAgIGNvbnN0IGlzUHVibGljUGFnZSA9IG5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL3B1YmxpYycpO1xuXG4gICAgICBpZiAoaXNQdWJsaWNQYWdlIHx8IGlzTG9nZ2VkSW4pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTsgLy8gUmVkaXJlY3QgdW5hdXRoZW50aWNhdGVkIHVzZXJzIHRvIGxvZ2luIHBhZ2VcbiAgICB9LFxuICB9LFxufSk7XG4iXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJDcmVkZW50aWFscyIsImF4aW9zIiwicHJvdmlkZXJzIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiYyIsImlkIiwibmFtZSIsInByb3ZpZGVyTWFwIiwibWFwIiwicHJvdmlkZXIiLCJwcm92aWRlckRhdGEiLCJoYW5kbGVycyIsImF1dGgiLCJzaWduSW4iLCJzaWduT3V0Iiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkFVVEhfU0VDUkVUIiwicGFnZXMiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInVzZXIiLCJyb2xlcyIsInNlc3Npb24iLCJhdXRob3JpemVkIiwicmVxdWVzdCIsIm5leHRVcmwiLCJpc0xvZ2dlZEluIiwiaXNQdWJsaWNQYWdlIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./auth.js\n");

/***/ })

});